(function(){var e={7297:function(e,a,t){"use strict";var n=t(9242),o=t(3396),r=t(7139);const s={key:0},i={key:1},l={key:0},u={key:1},c={key:2};function d(e,a,t,n,d,m){const g=(0,o.up)("Spinner"),p=(0,o.up)("SignIn"),v=(0,o.up)("Chat"),f=(0,o.up)("RoomList"),h=(0,o.up)("UserList"),w=(0,o.up)("CreateRoom");return n.connected?((0,o.wg)(),(0,o.iD)("div",i,[n.isLoggedIn?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",{class:"chat-component",style:(0,r.j5)({marginLeft:n.middleMarginLeft,marginRight:n.middleMarginRight})},[(0,o.Wm)(v,{chatName:n.chat.name,chatData:n.chat.data,currentUser:n.currentUser,usersTyping:n.usersTyping,onSendMessage:n.sendMessage,onTyping:n.typing,onHandleEdit:n.handleEdit},null,8,["chatName","chatData","currentUser","usersTyping","onSendMessage","onTyping","onHandleEdit"])],4),(0,o.Wm)(f,{rooms:n.rooms,onRoomChange:n.roomChange,onCreateNewRoom:n.createNewRoomWindow,onGetRooms:n.getRooms,onToggleSidebar:n.toggleLeft},null,8,["rooms","onRoomChange","onCreateNewRoom","onGetRooms","onToggleSidebar"]),(0,o.Wm)(h,{users:n.users,currentUser:n.currentUser,chatName:n.chat.name,onLogOut:n.logOut,onRoomChange:n.roomChange,onToggleSidebar:n.toggleRight},null,8,["users","currentUser","chatName","onLogOut","onRoomChange","onToggleSidebar"])])):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(p,{onSuccess:n.loggedIn},null,8,["onSuccess"])])),n.showCreateWindow?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(w,{onDone:n.createNewRoom},null,8,["onDone"])])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(g)]))}t(7658);var m=t(4870),g=t(4161),p=t(7851);const v=e=>((0,o.dD)("data-v-98de60e2"),e=e(),(0,o.Cn)(),e),f={class:"rooms"},h=v((()=>(0,o._)("h2",null,"Conversations",-1))),w=["onClick"];function _(e,a,t,n,s,i){const l=(0,o.up)("Room");return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["sideBar",{"sideBar-hidden":n.isHidden}])},[(0,o._)("button",{class:"toggle-button",onClick:a[0]||(a[0]=(...e)=>n.toggleSidebar&&n.toggleSidebar(...e))},[(0,o._)("i",{class:(0,r.C_)(["fa-solid",{"fa-arrow-right":n.isHidden,"fa-arrow-left":!n.isHidden}])},null,2)]),(0,o._)("div",f,[(0,o._)("div",{class:"room",onClick:a[1]||(a[1]=(...e)=>n.CreateRoom&&n.CreateRoom(...e))},[(0,o.Wm)(l,{room:{name:"Create public chat"},icon:'<i class="fa-solid fa-comment-medical"></i>'})]),h,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rooms,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"room",key:e.id,onClick:a=>n.roomChange(e.name)},[(0,o.Wm)(l,{room:e,icon:"<i class='fa-solid fa-comment-dots'></i>"},null,8,["room"])],8,w)))),128))])],2)}const y={class:"icon"},b=["innerHTML"],D={class:"content"},k={class:"name"},C={class:"message"};function S(e,a,t,n,s,i){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",y,[(0,o._)("div",{innerHTML:t.icon},null,8,b)]),(0,o._)("div",D,[(0,o._)("div",k,(0,r.zw)(t.room.name),1),(0,o._)("div",C,(0,r.zw)(t.room.message),1)])])}var H={props:["room","icon"]},U=t(89);const E=(0,U.Z)(H,[["render",S],["__scopeId","data-v-c3b44f28"]]);var T=E,L={components:{Room:T},props:["rooms"],setup(e,{emit:a}){const t=(0,m.iH)(!1),n=()=>{a("getRooms")},r=()=>{t.value=!t.value,a("toggleSidebar")},s=e=>{a("roomChange",e)},i=()=>{a("createNewRoom")};return(0,o.bv)(n),{isHidden:t,toggleSidebar:r,getRooms:n,roomChange:s,CreateRoom:i}}};const O=(0,U.Z)(L,[["render",_],["__scopeId","data-v-98de60e2"]]);var x=O;const R=e=>((0,o.dD)("data-v-1175139e"),e=e(),(0,o.Cn)(),e),N={class:"users-online"},M=R((()=>(0,o._)("h2",null,"Active users",-1))),I=["onClick"];function j(e,a,t,n,s,i){const l=(0,o.up)("CurrentUser"),u=(0,o.up)("User");return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["sideBar",{"sideBar-hidden":n.isHidden}])},[(0,o._)("button",{class:"toggle-button",onClick:a[0]||(a[0]=(...e)=>n.toggleSidebar&&n.toggleSidebar(...e))},[(0,o._)("i",{class:(0,r.C_)(["fa-solid",{"fa-arrow-left":n.isHidden,"fa-arrow-right":!n.isHidden}])},null,2)]),(0,o.Wm)(l,{currentUser:t.currentUser,chatName:t.chatName,onLogOut:n.logOut},null,8,["currentUser","chatName","onLogOut"]),(0,o._)("div",N,[M,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.users,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[e.name!==t.currentUser.name?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"user",onClick:a=>n.roomChange(e.name)},[(0,o.Wm)(u,{user:e},null,8,["user"])],8,I)):(0,o.kq)("",!0)])))),128))])],2)}const Z={class:"currentUser"},q=["src"],z={key:0},W={key:1};function P(e,a,n,s,i,l){return(0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("img",{src:t(4063)("./profile"+n.currentUser.avatar+".jpg")},null,8,q),(0,o._)("p",null,"Logged in as: "+(0,r.zw)(n.currentUser.name),1),n.chatName?((0,o.wg)(),(0,o.iD)("p",z,(0,r.zw)(n.chatName.replace(/@/g," - ")),1)):((0,o.wg)(),(0,o.iD)("p",W,"Not in conversation")),(0,o._)("button",{onClick:a[0]||(a[0]=(...e)=>s.logOut&&s.logOut(...e)),class:"logout"},"LOG OUT")])}var Y={props:["currentUser","chatName"],emits:["logOut"],setup(e,{emit:a}){const t=()=>{a("logOut")};return{logOut:t}}};const A=(0,U.Z)(Y,[["render",P],["__scopeId","data-v-e024f934"]]);var G=A;const V=e=>((0,o.dD)("data-v-9fd6ca56"),e=e(),(0,o.Cn)(),e),B={class:"container"},F={class:"avatar"},K=["src"],$={class:"user"},J={key:0,class:"user-content"},Q={class:"name"},X={class:"in-room"},ee={key:1,class:"user-content"},ae={class:"name"},te=V((()=>(0,o._)("div",{class:"not-room"},"Not in conversation",-1))),ne={key:2,class:"notification"},oe=V((()=>(0,o._)("i",{class:"fa-solid fa-envelope"},null,-1)));function re(e,a,n,s,i,l){return(0,o.wg)(),(0,o.iD)("div",B,[(0,o._)("div",F,[(0,o._)("img",{src:t(4063)("./profile"+n.user.avatar+".jpg")},null,8,K)]),(0,o._)("div",$,[n.user.room?((0,o.wg)(),(0,o.iD)("div",J,[(0,o._)("span",Q,(0,r.zw)(n.user.name),1),(0,o._)("div",X,(0,r.zw)(n.user.room),1)])):((0,o.wg)(),(0,o.iD)("div",ee,[(0,o._)("span",ae,(0,r.zw)(n.user.name),1),te])),n.user.notification?((0,o.wg)(),(0,o.iD)("div",ne,[oe,(0,o.Uk)(" ! ")])):(0,o.kq)("",!0)])])}var se={props:["user"]};const ie=(0,U.Z)(se,[["render",re],["__scopeId","data-v-9fd6ca56"]]);var le=ie,ue={props:["users","currentUser","chatName"],components:{CurrentUser:G,User:le},setup(e,{emit:a}){const t=(0,m.iH)(!1),n=()=>{t.value=!t.value,a("toggleSidebar")},o=()=>{a("logOut")},r=e=>{e&&a("roomChange",e,!0)};return{isHidden:t,toggleSidebar:n,logOut:o,roomChange:r}}};const ce=(0,U.Z)(ue,[["render",j],["__scopeId","data-v-1175139e"]]);var de=ce;const me=e=>((0,o.dD)("data-v-45e5dd8e"),e=e(),(0,o.Cn)(),e),ge={class:"container"},pe={class:"content"},ve=me((()=>(0,o._)("label",null,"Name:",-1))),fe=me((()=>(0,o._)("label",null,"Password:",-1))),he={key:0,class:"error"},we={key:1},_e={key:3,class:"error"},ye={key:4},be={key:5,class:"avatar-options"},De=["value"],ke=["src"],Ce={key:6,class:"error"};function Se(e,a,t,s,i,l){return(0,o.wg)(),(0,o.iD)("div",ge,[(0,o._)("div",pe,[(0,o._)("form",{onSubmit:a[4]||(a[4]=(0,n.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[(0,o._)("h2",null,(0,r.zw)(s.header),1),ve,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>s.userData.name=e),maxlength:"30",required:""},null,512),[[n.nr,s.userData.name]]),fe,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>s.userData.password=e),required:""},null,512),[[n.nr,s.userData.password]]),s.passwordError?((0,o.wg)(),(0,o.iD)("div",he,(0,r.zw)(s.passwordError),1)):(0,o.kq)("",!0),s.registerScreen?((0,o.wg)(),(0,o.iD)("label",we,"Repeat password:")):(0,o.kq)("",!0),s.registerScreen?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:2,type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>s.password2=e),required:""},null,512)),[[n.nr,s.password2]]):(0,o.kq)("",!0),s.passwordError&&s.registerScreen?((0,o.wg)(),(0,o.iD)("div",_e,(0,r.zw)(s.passwordError),1)):(0,o.kq)("",!0),s.registerScreen?((0,o.wg)(),(0,o.iD)("label",ye,"Choose your avatar:")):(0,o.kq)("",!0),s.registerScreen?((0,o.wg)(),(0,o.iD)("div",be,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.imageOptions,(e=>((0,o.wg)(),(0,o.iD)("label",{key:e.id},[(0,o.wy)((0,o._)("input",{type:"radio",value:e.id,"onUpdate:modelValue":a[3]||(a[3]=e=>s.userData.avatar=e),required:""},null,8,De),[[n.G2,s.userData.avatar]]),(0,o._)("img",{src:e.src,alt:"Avatar",class:(0,r.C_)({"avatar-image":!0,"selected-avatar":s.isSelectedAvatar(e.id)})},null,10,ke)])))),128))])):(0,o.kq)("",!0),(0,o._)("div",null,[(0,o._)("button",null,(0,r.zw)(s.buttonText.submit),1)]),s.loginError?((0,o.wg)(),(0,o.iD)("div",Ce,(0,r.zw)(s.loginError),1)):(0,o.kq)("",!0)],32),(0,o._)("div",{class:"outside",onClick:a[5]||(a[5]=(...e)=>s.changeScreen&&s.changeScreen(...e))},[(0,o._)("button",null,(0,r.zw)(s.buttonText.change),1)])])])}var He={emits:["success"],setup(e,{emit:a}){const n=(0,m.iH)({name:"Guest",avatar:1,password:"Guest",newuser:!1}),r=[{id:1,src:t(5520)},{id:2,src:t(1532)},{id:3,src:t(7326)},{id:4,src:t(1148)},{id:5,src:t(3753)}],s=(0,m.iH)(""),i=(0,m.iH)(null),l=(0,m.iH)(null),u=(0,m.iH)(!1),c=(0,m.iH)({submit:"Log in",change:"Register new user instead"}),d=(0,m.iH)("Log in to Forum app"),p=(0,o.Fl)((()=>e=>n.value.avatar===e)),v=()=>{n.value={name:"",password:"",avatar:1},s.value="",u.value=!u.value,i.value="",l.value="",u.value?(c.value.change="Use existing user account instead",c.value.submit="Register new user",d.value="Register new user",n.value.newuser=!0):(c.value.change="Register new user instead",c.value.submit="Log in",d.value="Log in to Forum app",n.value.newuser=!1)},f=async(e=n.value)=>{try{const t=await g.Z.post("https://modern-forum-app.redglimmer.repl.co/signup",e);a("success",t.data)}catch(t){t.request?l.value=t.request.responseText:l.value="An error has occurred"}},h=()=>{u.value&&n.value.password.length<=4?i.value="Passwords should be more than 4 characters long":u.value&&n.value.password!==s.value?i.value="Password does not match":(i.value=null,f())};return{imageOptions:r,userData:n,password2:s,passwordError:i,loginError:l,registerScreen:u,buttonText:c,header:d,signupUser:f,handleSubmit:h,changeScreen:v,isSelectedAvatar:p}}};const Ue=(0,U.Z)(He,[["render",Se],["__scopeId","data-v-45e5dd8e"]]);var Ee=Ue;const Te=e=>((0,o.dD)("data-v-5e12f568"),e=e(),(0,o.Cn)(),e),Le={class:"chat-name"},Oe={class:"chat-container"},xe={class:"header"},Re={class:"sender"},Ne=["src"],Me={class:"sender"},Ie=["innerHTML"],je={key:1,class:"content"},Ze=["disabled"],qe=Te((()=>(0,o._)("div",{class:"submit"},[(0,o._)("button",null,[(0,o._)("i",{class:"fa-solid fa-paper-plane send"})])],-1))),ze={key:2,class:"options"},We=["onClick"],Pe=Te((()=>(0,o._)("i",{class:"fa-solid fa-pen"},null,-1))),Ye=[Pe],Ae=["onClick"],Ge=Te((()=>(0,o._)("i",{class:"fa-solid fa-trash"},null,-1))),Ve=[Ge],Be={key:3,class:"options"},Fe=["onClick"],Ke=Te((()=>(0,o._)("i",{class:"fa-solid fa-xmark"},null,-1))),$e=[Ke],Je={class:"users-typing"},Qe={class:"send-container"},Xe=Te((()=>(0,o._)("div",{class:"submit"},[(0,o._)("button",null,[(0,o._)("i",{class:"fa-solid fa-paper-plane send"})])],-1)));function ea(e,a,s,i,l,u){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Le,(0,r.zw)(s.chatName.replace(/@/g," - ")||"Not in conversation"),1),(0,o._)("div",Oe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.localChatData,(l=>((0,o.wg)(),(0,o.iD)("div",{class:"message",key:l._id},[(0,o._)("div",xe,[(0,o._)("div",Re,(0,r.zw)(l.sender),1),(0,o._)("img",{src:t(4063)("./profile"+l.avatar+".jpg")},null,8,Ne),(0,o._)("div",Me,(0,r.zw)(new Date(l.timestamp).toLocaleString()),1)]),i.editing.state&&l._id===i.editing.id?((0,o.wg)(),(0,o.iD)("div",je,[(0,o._)("form",{onSubmit:a[1]||(a[1]=(0,n.iM)(((...e)=>i.handleEdit&&i.handleEdit(...e)),["prevent"]))},[(0,o.wy)((0,o._)("textarea",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>i.editing.data=e),disabled:i.editing.isLocked,required:""},null,8,Ze),[[n.nr,i.editing.data]]),qe],32)])):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"content",innerHTML:i.formatMessage(l.content)},null,8,Ie)),l.sender===s.currentUser.name&&"[DELETED]"!==l.content&&!1===i.editing.state?((0,o.wg)(),(0,o.iD)("div",ze,[(0,o._)("button",{onClick:e=>i.editMessage(l._id,l.content.replace(/(\s*)\[EDITED\]/g,""))},Ye,8,We),(0,o._)("button",{onClick:a=>i.editMessage(l._id,"MESSAGE WILL BE DELETED!",e.locked=!0)},Ve,8,Ae)])):(0,o.kq)("",!0),l.sender===s.currentUser.name&&"[DELETED]"!==l.content&&!0===i.editing.state&&l._id===i.editing.id?((0,o.wg)(),(0,o.iD)("div",Be,[(0,o._)("button",{onClick:e=>i.editMessage(l._id)},$e,8,Fe)])):(0,o.kq)("",!0)])))),128)),(0,o._)("div",Je,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.usersTyping,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"user-typing",key:a},(0,r.zw)(e)+" ... ",1)))),128))])]),(0,o._)("div",Qe,[(0,o._)("form",{onSubmit:a[3]||(a[3]=(0,n.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o.wy)((0,o._)("textarea",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>i.message=e),required:""},null,512),[[n.nr,i.message]]),Xe],32)])])}var aa={props:["chatData","chatName","currentUser","usersTyping"],setup(e,{emit:a}){const t=(0,m.iH)(""),n=(0,m.iH)([]),r=(0,m.iH)(null),s=(0,m.iH)({id:"",state:!1,data:"",isLocked:!1}),i=e=>{const a=e.split(" ");if(a.length>0&&"[EDITED]"===a[a.length-1]){const e=a.pop(),t=a.join(" ");return`${t} <p style="color: #DDD0C8; font-weight: 600;">${e}</p>`}if(a.length>0&&"[DELETED]"===a[a.length-1]){const e=a.pop(),t=a.join(" ");return`${t} <span style="color: #DDD0C8; font-weight: 600;">${e}</span>`}return e};(0,o.YP)((()=>e.chatData),(e=>{n.value=e})),(0,o.YP)(t,(e=>{""!==e.trim()&&a("typing")})),(0,o.YP)((()=>e.chatName),(()=>{s.value.state=!1}));const l=()=>{r.value===t.value&&window.scrollTo(0,document.body.scrollHeight),r.value=t.value},u=()=>{if(!e.chatName||""===t.value.trim())return t.value="",!1;a("sendMessage",t.value),n.value.push({id:"placeholder",sender:e.currentUser.name,avatar:e.currentUser.avatar,content:t.value,timestamp:new Date}),t.value="",l()},c=(e,a,t=!1)=>{s.value={id:e,state:!s.value.state,data:a,isLocked:t}},d=()=>{a("handleEdit",s.value),s.value={state:!1}};return(0,o.bv)(l),(0,o.ic)(l),{editing:s,message:t,localChatData:n,handleSubmit:u,editMessage:c,handleEdit:d,formatMessage:i}}};const ta=(0,U.Z)(aa,[["render",ea],["__scopeId","data-v-5e12f568"]]);var na=ta;const oa=e=>((0,o.dD)("data-v-4682ee92"),e=e(),(0,o.Cn)(),e),ra=oa((()=>(0,o._)("h2",null,"Create new conversation",-1))),sa=oa((()=>(0,o._)("label",null,"Conversation name:",-1))),ia=oa((()=>(0,o._)("div",{class:"submit"},[(0,o._)("button",null,"Create conversation")],-1)));function la(e,a,t,r,s,i){return(0,o.wg)(),(0,o.iD)("div",{class:"backdrop",onClick:a[3]||(a[3]=(...e)=>r.close&&r.close(...e))},[(0,o._)("div",{class:"pop-up-window",onClick:a[2]||(a[2]=(0,n.iM)((()=>{}),["stop"]))},[ra,(0,o._)("form",{onSubmit:a[1]||(a[1]=(0,n.iM)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[sa,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.chatName=e),maxlength:"44",required:""},null,512),[[n.nr,r.chatName]]),ia],32)])])}g.Z.defaults.withCredentials=!0;var ua={setup(e,{emit:a}){const t=(0,m.iH)(null),n=async()=>{try{await g.Z.post("https://modern-forum-app.redglimmer.repl.co/chat/"+t.value)}catch(e){console.log(e)}a("done")},o=()=>{a("done")};return{chatName:t,handleSubmit:n,close:o}}};const ca=(0,U.Z)(ua,[["render",la],["__scopeId","data-v-4682ee92"]]);var da=ca;const ma={class:"container"},ga=(0,o._)("div",{class:"loading"},[(0,o._)("p",null,"Connecting to the server"),(0,o._)("div",{class:"loading-circle"},[(0,o._)("div",{class:"spinner"})]),(0,o._)("p",null,"Please wait")],-1),pa=[ga];function va(e,a){return(0,o.wg)(),(0,o.iD)("div",ma,pa)}const fa={},ha=(0,U.Z)(fa,[["render",va]]);var wa=ha;g.Z.defaults.withCredentials=!0;var _a={name:"App",components:{RoomList:x,UserList:de,SignIn:Ee,Chat:na,CreateRoom:da,Spinner:wa},setup(){const e=(0,m.iH)(!1),a=(0,m.iH)({name:null,avatar:1}),t=(0,m.iH)(!1),n=(0,m.iH)(!1),r=(0,m.iH)({data:null,name:""}),s=(0,m.iH)(null),i=(0,m.iH)("280px"),l=(0,m.iH)("280px"),u=()=>{"280px"===l.value?l.value="30px":l.value="280px"},c=()=>{"280px"===i.value?i.value="30px":i.value="280px"},d=(0,m.iH)(!1),v=async()=>{try{const t=await g.Z.get("https://modern-forum-app.redglimmer.repl.co/");200===t.status&&(d.value=!0,localStorage.getItem("username")&&localStorage.getItem("avatar")?(a.value.name=localStorage.getItem("username"),a.value.avatar=localStorage.getItem("avatar"),e.value=!0,f.emit("login",a.value.name,a.value.avatar)):e.value=!1)}catch(t){t.response&&401===t.response.status?w():(console.log(t),setTimeout(v,4e3))}};(0,o.bv)(v);const f=(0,p.io)("https://modern-forum-app.redglimmer.repl.co/"),h=t=>{localStorage.setItem("username",t.name),localStorage.setItem("avatar",t.avatar),a.value.name=t.name,a.value.avatar=t.avatar,e.value=!0,f.emit("login",a.value.name,a.value.avatar)},w=async()=>{try{await g.Z.post("https://modern-forum-app.redglimmer.repl.co/logout");e.value=!1,d.value=!0,f.emit("logout",a.value.name),localStorage.removeItem("avatar"),localStorage.removeItem("username")}catch(t){console.log(t)}},_=async(e,t=!1)=>{if(t){let t,o;e.includes("@")?t=e:(o=[a.value.name,e].sort(),t=o[0]+"@"+o[1]+"@private");try{const e=await g.Z.get("https://modern-forum-app.redglimmer.repl.co/chat/"+t);r.value.data=e.data,r.value.name=t,f.emit("room-change",null),n.value=!0}catch(s){if(console.log(s),s.response&&401===s.response.status)w();else if(s.response&&404===s.response.status)try{await g.Z.post("https://modern-forum-app.redglimmer.repl.co/chat/@",{users:o});const e=await g.Z.get("https://modern-forum-app.redglimmer.repl.co/chat/"+t);r.value.data=e.data,r.value.name=t,f.emit("room-change",null),n.value=!0}catch(s){console.log(s)}else console.log(s)}}else try{const a=await g.Z.get("https://modern-forum-app.redglimmer.repl.co/chat/"+e);r.value.data=a.data,r.value.name=e,f.emit("room-change",e),n.value=!1}catch(s){console.log(s)}const o=E.value.find((a=>a.name===e));o&&(o.notification=!1)},y=async e=>{try{await g.Z.post("https://modern-forum-app.redglimmer.repl.co/message/"+r.value.name,{content:e});f.emit("new-message",r.value.data[r.value.data.length-1],r.value.name)}catch(t){t.response&&401===t.response.status?w():console.log(t)}let a=!1;r.value.name.includes("@")&&(a=!0),_(r.value.name,a)},b=async e=>{if(e.isLocked)try{await g.Z.delete("https://modern-forum-app.redglimmer.repl.co/message/"+r.value.name,{data:{message_id:e.id}});f.emit("new-message",r.value.data[r.value.data.length-1],r.value.name)}catch(t){t.response&&401===t.response.status?w():console.log(t)}else try{await g.Z.put("https://modern-forum-app.redglimmer.repl.co/message/"+r.value.name,{message_id:e.id,content:e.data});f.emit("new-message",r.value.data[r.value.data.length-1],r.value.name)}catch(t){t.response&&401===t.response.status?w():console.log(t)}let a=!1;r.value.name.includes("@")&&(a=!0),_(r.value.name,a)},D=async()=>{try{const e=await g.Z.get("https://modern-forum-app.redglimmer.repl.co/chat");s.value=e.data}catch(e){e.response&&401===e.response.status?w():console.log(e)}},k=()=>{t.value=!t.value},C=()=>{t.value=!t.value,f.emit("room-update"),D()};f.on("new-message",((e=null,a,t=null)=>{if(a===r.value.name);else{clearTimeout(U);const e=E.value.find((e=>e.name===t));e&&(e.notification=!0)}let n=!1;r.value.name.includes("@")&&(n=!0),_(r.value.name,n)})),f.on("room-update",(()=>{D()}));const S=(0,m.iH)([]),H=()=>{f.emit("typing",r.value.name)};let U=null;f.on("typing",((e,a)=>{if(e===r.value.name)-1===S.value.indexOf(a)&&(S.value.push(a),setTimeout((()=>{const e=S.value.indexOf(a);-1!==e&&S.value.splice(e,1)}),3e3));else{const t=s.value.find((a=>a.name===e));t&&(t.message=a+" typing...",clearTimeout(U),U=setTimeout((()=>{t.message=""}),3e3))}}));const E=(0,m.iH)([]);return f.on("user-list-updated",(e=>{const a=[...E.value];E.value=e,a.forEach((e=>{const a=E.value.findIndex((a=>a.name===e.name));e.notification&&-1!==a&&(E.value[a].notification=!0)}))})),{users:E,isLoggedIn:e,currentUser:a,chat:r,showCreateWindow:t,rooms:s,usersTyping:S,connected:d,middleMarginLeft:i,middleMarginRight:l,loggedIn:h,logOut:w,roomChange:_,sendMessage:y,createNewRoom:C,getRooms:D,typing:H,checkServer:v,createNewRoomWindow:k,toggleRight:u,toggleLeft:c,handleEdit:b}}};const ya=(0,U.Z)(_a,[["render",d]]);var ba=ya;(0,n.ri)(ba).mount("#app")},4063:function(e,a,t){var n={"./profile1.jpg":5520,"./profile2.jpg":1532,"./profile3.jpg":7326,"./profile4.jpg":1148,"./profile5.jpg":3753};function o(e){var a=r(e);return t(a)}function r(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=4063},5520:function(e,a,t){"use strict";e.exports=t.p+"img/profile1.b3838a6b.jpg"},1532:function(e,a,t){"use strict";e.exports=t.p+"img/profile2.330a795e.jpg"},7326:function(e,a,t){"use strict";e.exports=t.p+"img/profile3.3bb9ae18.jpg"},1148:function(e,a,t){"use strict";e.exports=t.p+"img/profile4.0dda3473.jpg"},3753:function(e,a,t){"use strict";e.exports=t.p+"img/profile5.8dcee409.jpg"}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var r=a[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,r){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var u=o();void 0!==u&&(a=u)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/modern-forum-application/"}(),function(){var e={143:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,r,s=n[0],i=n[1],l=n[2],u=0;if(s.some((function(a){return 0!==e[a]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(l)var c=l(t)}for(a&&a(n);u<s.length;u++)r=s[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},n=self["webpackChunkforum_app"]=self["webpackChunkforum_app"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(7297)}));n=t.O(n)})();
//# sourceMappingURL=app.5cf8fc45.js.map